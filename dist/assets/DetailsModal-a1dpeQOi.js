import{N as W,r as y,d as Q,S as L,T as X,e as Z,j as t,f as p,m as O,h as ee,k as te,q as se,l as z,n as ne,o as ae,p as M,t as re,v as ie,w as ce,x as le,D as de,i as w,u as b,M as d,B as T,a as S,y as oe,z as me,A as he,b as E,s as U}from"./index-Cy1U88sa.js";import"./Modal-BGjb3hrj.js";import{s as ue,a as xe,b as je,g as fe,c as ge,d as ve,I as q}from"./selectors-B3ZcmyZz.js";import{F as ye,a as g,C as r}from"./formik.esm-Ck2ofJqQ.js";import{D as $}from"./DatePick-VY6TPrCu.js";import{R as j}from"./Row--G6XAMP6.js";const Re=["as","onSelect","activeKey","role","onKeyDown"];function Ce(e,s){if(e==null)return{};var a={},n=Object.keys(e),c,i;for(i=0;i<n.length;i++)c=n[i],!(s.indexOf(c)>=0)&&(a[c]=e[c]);return a}const K=()=>{},B=ee("event-key"),H=y.forwardRef((e,s)=>{let{as:a="div",onSelect:n,activeKey:c,role:i,onKeyDown:o}=e,h=Ce(e,Re);const u=Q(),f=y.useRef(!1),v=y.useContext(L),m=y.useContext(X);let D,x;m&&(i=i||"tablist",c=m.activeKey,D=m.getControlledId,x=m.getControllerId);const R=y.useRef(null),C=l=>{const _=R.current;if(!_)return null;const I=se(_,`[${B}]:not([aria-disabled=true])`),P=_.querySelector("[aria-selected=true]");if(!P||P!==document.activeElement)return null;const G=I.indexOf(P);if(G===-1)return null;let k=G+l;return k>=I.length&&(k=0),k<0&&(k=I.length-1),I[k]},N=(l,_)=>{l!=null&&(n==null||n(l,_),v==null||v(l,_))},F=l=>{if(o==null||o(l),!m)return;let _;switch(l.key){case"ArrowLeft":case"ArrowUp":_=C(-1);break;case"ArrowRight":case"ArrowDown":_=C(1);break;default:return}_&&(l.preventDefault(),N(_.dataset[te("EventKey")]||null,l),f.current=!0,u())};y.useEffect(()=>{if(R.current&&f.current){const l=R.current.querySelector(`[${B}][aria-selected=true]`);l==null||l.focus()}f.current=!1});const A=Z(s,R);return t.jsx(L.Provider,{value:N,children:t.jsx(p.Provider,{value:{role:i,activeKey:O(c),getControlledId:D||K,getControllerId:x||K},children:t.jsx(a,Object.assign({},h,{onKeyDown:F,ref:A,role:i}))})})});H.displayName="Nav";const Ne=Object.assign(H,{Item:W}),Y=y.forwardRef(({bsPrefix:e,active:s,disabled:a,eventKey:n,className:c,variant:i,action:o,as:h,...u},f)=>{e=z(e,"list-group-item");const[v,m]=ne({key:O(n,u.href),active:s,...u}),D=ae(R=>{if(a){R.preventDefault(),R.stopPropagation();return}v.onClick(R)});a&&u.tabIndex===void 0&&(u.tabIndex=-1,u["aria-disabled"]=!0);const x=h||(o?u.href?"a":"button":"div");return t.jsx(x,{ref:f,...u,...v,onClick:D,className:M(c,e,m.isActive&&"active",a&&"disabled",i&&`${e}-${i}`,o&&`${e}-action`)})});Y.displayName="ListGroupItem";const Te=Y,V=y.forwardRef((e,s)=>{const{className:a,bsPrefix:n,variant:c,horizontal:i,numbered:o,as:h="div",...u}=re(e,{activeKey:"onSelect"}),f=z(n,"list-group");let v;return i&&(v=i===!0?"horizontal":`horizontal-${i}`),t.jsx(Ne,{ref:s,...u,as:h,className:M(a,f,c&&`${f}-${c}`,v&&`${f}-${v}`,o&&`${f}-numbered`)})});V.displayName="ListGroup";const _e=Object.assign(V,{Item:Te}),De=e=>({type:ie,payload:e}),Se=e=>({type:le,payload:e}),we=e=>({type:de,payload:e}),ke=e=>({type:ce,payload:e}),Ee=()=>w.get("/api/tracker/projects/"),be=e=>{const s=new Date(e["Requested Date"]),a=e["Target Date"]==="N/A"?null:new Date(e["Target Date"]),n=e["Resolved Date"]==="N/A"?null:new Date(e["Resolved Date"]),c={type_ref:e.Type,sites_ref:e.Site,client_ref:e.Client,user_ref:e.User,seat_req:e["Seating Requirement"],requested_date:s,target_date:a,resolved_date:n,status:e.Status,remarks:e.Remarks,solution:e.Solution,email_trail:e["Email Trail"],updated_dt_utc:new Date,created_dt_utc:new Date,critical_item:"Low",last_updated_by:"Junel"};return w.put("/api/tracker/project/update/"+e["Tracking ID"]+"/",c)},Ae=e=>{const s={last_updated_by:e.last_updated_by};return w.put("/api/tracker/project/freeze/"+e.farming_ident+"/",s)},Ze=e=>s=>{Ee().then(a=>{s(De(a.data)),e&&e(null,"Success")}).catch(a=>{var n;s(ke()),e&&e(((n=a==null?void 0:a.response)==null?void 0:n.data)||a,null)})},Ie=(e,s)=>async a=>{try{const n=await be(e);a(Se()),n.status===200?s&&s(200,"Success"):s&&s(n.status||n.statusText,"Error occurred")}catch(n){console.log(n),s&&s(n.status||n,null)}},qe=(e,s)=>async a=>{try{const n=await Ae(e);a(we()),n.status,s&&s(200,"Success")}catch(n){console.log(n),s&&s(n.status||n,null)}},J=e=>{const s=b(),{refetchTrackerData:a}=e,n=(i,o)=>{i===200?S.success("Success Edit Changes",{position:"bottom-right"}):S.error(o||"An error occurred",{position:"bottom-right"})},c=i=>{s(Ie(i,n)),a(),e.closeConfirm(!0),e.closeEdit(!0),e.close(!0)};return t.jsx(t.Fragment,{children:t.jsxs(d,{show:e.showConfirm,centered:!0,children:[t.jsx(d.Header,{children:"Confirmation"}),t.jsx(d.Body,{children:"Do you want to apply changes?"}),t.jsxs(d.Footer,{children:[t.jsx(T,{variant:"secondary",onClick:e.closeConfirm,children:"Cancel"}),t.jsx(T,{className:"btn-color",variant:"primary",onClick:()=>c(e.editData),children:"Yes"})]})]})})},Fe=e=>({type:oe,payload:e}),Pe=e=>({type:he,payload:e}),$e=e=>({type:me,payload:e}),Ge=()=>w.get("/api/rfp/projects/"),Le=e=>{const s=new Date(e["Requested Date"]),a=e["Target Date"]==="N/A"?null:new Date(e["Target Date"]),n={type_ref:e.Type,sites_ref:e.Site,client_ref:e.Client,user_ref:e.User,requestor:e.Requestor,seat_req:e["Seating Requirement"],target_date:a,requested_date:s,status:"RFP",remarks:e.Remarks,solution:e.Solution,email_trail:e["Email Trail"],updated_dt_utc:new Date,created_dt_utc:new Date,critical_item:"Low",last_updated_by:"Junel"};return console.log(n),w.put("/api/rfp/project/update/"+e["RFP ID"]+"/",n)},Ke=e=>{const s={last_updated_by:e.last_updated_by};return w.put("/api/rfp/project/freeze/"+e.farming_ident+"/",s)},pe=()=>e=>{Ge().then(s=>{e(Fe(s.data))}).catch(s=>{e((void 0)(s))})},Be=(e,s)=>async a=>{try{const n=await Le(e);a(Pe()),n.status===200?s&&s(200,"Success"):s&&s(n.status||n.statusText,"Error occurred")}catch(n){s&&s(n.status||n,null)}},Oe=(e,s)=>async a=>{try{const n=await Ke(e);a($e()),n.status,s&&s(200,"Success")}catch(n){console.log(n),s&&s(n.status||n,null)}},ze=e=>{const s=b(),{refetchRfpData:a}=e,n=(i,o)=>{i===200?S.success("Success Edit Changes",{position:"bottom-right"}):S.error(o||"An error occurred",{position:"bottom-right"})},c=i=>{s(Be(i,n)),a(),e.closeConfirm(!0),e.closeEdit(!0),e.close(!0)};return t.jsxs(d,{show:e.showConfirm,centered:!0,children:[t.jsx(d.Header,{children:"Confirmation"}),t.jsx(d.Body,{children:"Do you want to apply changes?"}),t.jsxs(d.Footer,{children:[t.jsx(T,{variant:"secondary",onClick:e.closeConfirm,children:"Cancel"}),t.jsx(T,{className:"btn-color",variant:"primary",onClick:()=>c(e.editData),children:"Yes"})]})]})},Me=e=>{const[s,a]=y.useState(!1),[n,c]=y.useState(),i=()=>a(!1),o=b(),h=E(ue),u=E(xe),f=E(je);y.useEffect(()=>{o(fe()),o(ge()),o(ve())},[]);const v=R=>{c(R)},m="Do you want to save changes?",D={User:e.reference&&e.reference.length>0?e.reference[0].user_ref:"","Tracking ID":e.identity&&e.identity.length>0?e.identity[0]["Tracking ID"]:"",Site:e.reference&&e.reference.length>0?e.reference[0].site_ref:"",Owner:e.data1&&e.data1.length>0?e.data1[0].Owner:"",Client:e.reference&&e.reference.length>0?e.reference[0].client_ref:"","Seating Requirement":e.data&&e.data.length>0?e.data[0]["Seating Requirement"]:"",Type:e.reference&&e.reference.length>0?e.reference[0].type_ref:"",Status:e.data&&e.data.length>0?e.data[0].Status:"","Requested Date":e.data1&&e.data1.length>0?e.data1[0]["Requested Date"]:"","Target Date":e.data1&&e.data1.length>0?e.data1[0]["Target Date"]:"","Resolved Date":e.data1&&e.data1.length>0?e.data1[0]["Resolved Date"]:"",Remarks:e.textArea&&e.textArea.length>0?e.textArea[0].Remarks:"",Solution:e.textArea&&e.textArea.length>0?e.textArea[0].Solution:"","Email Trail":e.textArea&&e.textArea.length>0?e.textArea[0]["Email Trail"]:"","N/A":""},x={User:e.reference&&e.reference.length>0?e.reference[0].user_ref:"","RFP ID":e.identity&&e.identity.length>0?e.identity[0]["RFP ID"]:"",Site:e.reference&&e.reference.length>0?e.reference[0].site_ref:"",Requestor:e.data1&&e.data1.length>0?e.data1[0].Requestor:"",Client:e.reference&&e.reference.length>0?e.reference[0].client_ref:"",Type:e.reference&&e.reference.length>0?e.reference[0].type_ref:"","Requested Date":e.data1&&e.data1.length>0?e.data1[0]["Requested Date"]:"","Target Date":e.data1&&e.data1.length>0?e.data1[0]["Target Date"]:"",Remarks:e.textArea&&e.textArea.length>0?e.textArea[0].Remarks:"","Email Trail":e.textArea&&e.textArea.length>0?e.textArea[0]["Email Trail"]:"","N/A":""};return t.jsxs("div",{className:"modal",children:[t.jsx(d,{show:e.showEdit,size:"xl",children:t.jsx(ye,{initialValues:e.modalName==="Tracker"?D:e.modalName==="RFP"?x:"",onSubmit:v,children:({handleSubmit:R,handleChange:C,values:N,touched:F,errors:A})=>t.jsxs(g,{onSubmit:R,children:[t.jsx(d.Header,{children:t.jsxs(d.Title,{children:["Edit ",e.modalName," ID# ",e.modalName==="Tracker"?e.identity[0]["Tracking ID"]:e.modalName==="RFP"?e.identity[0]["RFP ID"]:""]})}),t.jsxs(d.Body,{children:[t.jsxs(j,{className:"mb-3",children:[t.jsxs(r,{md:"6",children:[e.modalName==="Tracker"?t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:"Status:"})}),t.jsx(r,{md:"6",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx(q,{children:t.jsxs("select",{className:"form-select",name:"Status",value:N.Status,onChange:C,children:[t.jsx("option",{value:"In Progress",children:"In Progress"}),t.jsx("option",{value:"Resolve",children:"Resolve"})]})})})})})]}):t.jsx(t.Fragment,{}),e.modalName==="RFP"?t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:"Requestor"})}),t.jsx(r,{md:"6",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx(g.Control,{type:"text",name:"Requestor",placeholder:"Requestor",value:N.Requestor,onChange:C,isValid:!!F.Requestor&&!A.Requestor,isInvalid:!!A.Requestor})})})})]}):"",t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:"Client:"})}),t.jsx(r,{md:"6",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx("select",{className:"form-select",name:"Client",value:N.Client,onChange:C,children:u==null?void 0:u.map(l=>t.jsx("option",{value:l.client_id,children:l.client_name}))})})})})]}),t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:"Site:"})}),t.jsx(r,{md:"6",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx("select",{className:"form-select",name:"Site",value:N.Site,onChange:C,children:f==null?void 0:f.map(l=>t.jsx("option",{value:l.site_id,children:l.site_name}))})})})})]}),e.modalName==="Tracker"?t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:"Seating Requirement:"})}),t.jsx(r,{md:"6  ",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsxs("select",{className:"form-select",name:"Seating Requirement",value:N["Seating Requirement"],onChange:C,children:[t.jsx("option",{value:"Dedicated",children:"Dedicated"}),t.jsx("option",{value:"Dedicated/Sharing",children:"Dedicated/Sharing"}),t.jsx("option",{value:"Lockdown",children:"Lockdown"}),t.jsx("option",{value:"Sharing",children:"Sharing"})]})})})})]}):""]}),t.jsxs(r,{md:"6",children:[t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:"Type:"})}),t.jsx(r,{md:"6",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx("select",{className:"form-select",name:"Type",value:N.Type,onChange:C,children:h==null?void 0:h.map(l=>t.jsx("option",{value:l.type_id,children:l.type_name}))})})})})]}),t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:"Requested Date:"})}),t.jsx(r,{md:"6",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx(q,{children:t.jsx($,{name:"Requested Date",className:"date"})})})})})]}),t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:"Target Date:"})}),t.jsx(r,{md:"6",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx(q,{children:t.jsx($,{name:e.data1.some(l=>l["Target Date"]==="N/A")?"N/A":"Target Date",className:"date"})})})})})]}),e.modalName==="Tracker"?t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:"Resolved Date:"})}),t.jsx(r,{md:"6",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx(q,{children:t.jsx($,{name:e.data1.some(l=>l["Resolved Date"]==="N/A")?"N/A":"Resolved Date",className:"date"})})})})})]}):""]})]}),t.jsx("hr",{}),t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"3",children:t.jsx("div",{className:"strong",children:"Remarks:"})}),t.jsx(r,{md:"9",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx(g.Control,{as:"textarea",name:"Remarks",rows:"4",className:"noresize",placeholder:"Remarks",value:N.Remarks,onChange:C})})})})]}),e.modalName==="Tracker"?t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"3",children:t.jsx("div",{className:"strong",children:"Solution:"})}),t.jsx(r,{md:"9",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx(g.Control,{as:"textarea",name:"Solution",rows:"4",className:"noresize",placeholder:"Remarks",value:N.Solution,onChange:C})})})})]}):"",t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"3",children:t.jsx("div",{className:"strong",children:"Email Trail:"})}),t.jsx(r,{md:"9",children:t.jsx("div",{children:t.jsx(g.Group,{children:t.jsx(g.Control,{as:"textarea",name:"Email Trail",rows:"4",className:"noresize",placeholder:"Remarks",value:N["Email Trail"],onChange:C})})})})]})]}),t.jsxs(d.Footer,{children:[t.jsx(T,{variant:"secondary",onClick:e.closeEdit,children:"Cancel"}),t.jsx(T,{type:"submit",className:"btn-color",variant:"primary",onClick:()=>a(!0),children:"Save"})]})]})})}),e.modalName==="Tracker"?t.jsx(J,{editData:n,modalBody:m,showConfirm:s,closeConfirm:i,...e}):"",e.modalName==="RFP"?t.jsx(ze,{editData:n,modalBody:m,showConfirm:s,closeConfirm:i,...e}):""]})},Ue=e=>{const s=b(),{refetchTrackerData:a}=e,n=E(U),c=(o,h)=>{o===200?S.success("Success Edit Changes",{position:"bottom-right"}):S.error(h||"An error occurred",{position:"bottom-right"})},i=o=>{const h={farming_ident:o[0]["Tracking ID"],last_updated_by:n};s(qe(h,c)),a(),e.closeConfirm(),e.close(!0)};return t.jsxs(d,{show:e.showConfirm,centered:!0,children:[t.jsx(d.Header,{children:"Confirmation"}),t.jsx(d.Body,{children:"Do you want to delete this ID?"}),t.jsxs(d.Footer,{children:[t.jsx(T,{variant:"secondary",onClick:e.closeConfirm,children:"Cancel"}),t.jsx(T,{className:"btn-color",variant:"primary",onClick:()=>i(e.identity),children:"Yes"})]})]})},He=e=>{const s=b(),{refetchRfpData:a}=e,n=E(U),c=(o,h)=>{o===200?S.success("Success Edit Changes",{position:"bottom-right"}):S.error(h||"An error occurred",{position:"bottom-right"})},i=o=>{const h={farming_ident:o[0]["RFP ID"],last_updated_by:n};s(Oe(h,c)),a(),e.closeConfirm(),e.close(!0)};return t.jsxs(d,{show:e.showConfirm,centered:!0,children:[t.jsx(d.Header,{children:"Confirmation"}),t.jsx(d.Body,{children:"Do you want to delete this ID?"}),t.jsxs(d.Footer,{children:[t.jsx(T,{variant:"secondary",onClick:e.closeConfirm,children:"Cancel"}),t.jsx(T,{className:"btn-color",variant:"primary",onClick:()=>i(e.identity),children:"Yes"})]})]})},et=e=>{var h,u,f,v;const[s,a]=y.useState(!1),[n,c]=y.useState(!1),i=()=>c(!1),o=()=>a(!1);return t.jsxs("div",{className:"modal",children:[t.jsxs(d,{show:e.show,onHide:e.close,size:"xl",children:[t.jsx(d.Header,{closeButton:!0,children:t.jsxs(d.Title,{children:[e.modalName," Details"]})}),t.jsx(d.Body,{children:t.jsxs(_e,{variant:"flush",children:[(h=e.identity)==null?void 0:h.map((m,D)=>t.jsx(t.Fragment,{children:Object.keys(m).map(x=>t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"2",children:t.jsxs("div",{className:"strong",children:[x,":"]})}),t.jsx(r,{md:"5",children:t.jsx("div",{className:"strong",children:m[x]})})]}))})),t.jsx("hr",{}),t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:(u=e.data)==null?void 0:u.map((m,D)=>t.jsx(t.Fragment,{children:Object.keys(m).map(x=>t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsxs("div",{className:"strong",children:[x,":"]})}),t.jsx(r,{md:"7",children:t.jsx("div",{children:m[x]})})]}))}))}),t.jsx(r,{md:"5",children:(f=e.data1)==null?void 0:f.map((m,D)=>t.jsx(t.Fragment,{children:Object.keys(m).map(x=>t.jsxs(j,{className:"mb-3",children:[t.jsx(r,{md:"5",children:t.jsxs("div",{className:"strong",children:[x,":"]})}),t.jsx(r,{md:"7",children:t.jsx("div",{children:m[x]})})]}))}))})]}),t.jsx("hr",{}),t.jsx(j,{className:"mb-3",children:(v=e.textArea)==null?void 0:v.map((m,D)=>t.jsx(t.Fragment,{children:Object.keys(m).map(x=>t.jsxs(r,{md:e.modalName==="RFP"?"5":"4",children:[t.jsx(r,{md:"10",children:t.jsxs("div",{className:"strong",children:[x,":"]})}),t.jsx(r,{md:"10",children:t.jsx("div",{children:m[x]})})]}))}))})]})}),t.jsxs(d.Footer,{children:[t.jsx(T,{variant:"danger",onClick:()=>c(!0),children:"Delete"}),t.jsx(T,{className:"btn-color",variant:"primary",onClick:()=>a(!0),children:"Edit"})]})]}),t.jsx(Me,{showEdit:s,closeEdit:o,...e}),t.jsx(J,{showConfirm:n,closeConfirm:i,...e}),e.modalName==="Tracker"?t.jsx(Ue,{showConfirm:n,closeConfirm:i,...e}):"",e.modalName==="RFP"?t.jsx(He,{showConfirm:n,closeConfirm:i,...e}):""]})};export{et as D,pe as a,Ze as g};
