import{u as q,b as j,s as y,r as f,j as e,B as R}from"./index-Cy1U88sa.js";import{F as L,a as s,C as r,E as o}from"./formik.esm-Ck2ofJqQ.js";import{c as C,a as d}from"./index.esm-DSeJ6hL8.js";import{D as b}from"./DatePick-VY6TPrCu.js";import{s as I,a as k,b as D,g as G,c as v,d as w,I as p,e as V}from"./selectors-B3ZcmyZz.js";import{C as h,R as m}from"./Row--G6XAMP6.js";const T=g=>{const x=q(),u=j(I),_=j(k),S=j(D),N=j(y);f.useEffect(()=>{x(G()),x(v()),x(w())},[]);const F=(a,{resetForm:n})=>{const t={type_ref:a.type,sites_ref:a.site,client_ref:a.client,user_ref:1,seat_req:a.seat,need:a.need,count:1,requested_date:a.requested_date,target_date:a.target_date,resolved_date:a.resolve_date===""?null:a.resolve_date,resolved_days:null,critical_item:"Low",requestor:a.requestor,status:a.status,remarks:a.remarks,solution:a.solution,email_trail:a.email_trail,created_dt_utc:new Date,updated_dt_utc:null,is_active:!0,last_updated_by:N};g.formdata(t),n()},P=C().shape({type:d().required("Please Select Type"),site:d().required("Please Select Site"),client:d().required("Please Select Client"),need:d().required("Please Add Need"),status:d().required("Please Select Status"),seat:d().when("status",{is:"In Progress",then:()=>d().required("Please Select Seat"),otherwise:()=>d().notRequired()}),requestor:d().when("status",{is:"RFP",then:()=>d().required("Please Add Requestor"),otherwise:()=>d().notRequired()})});return e.jsx(L,{validationSchema:P,onSubmit:F,initialValues:{type:"",site:"",client:"",seat:"",need:"",requestor:"",requested_date:new Date,target_date:"",resolve_date:"",status:"In Progress",remarks:"",solution:"",email_trail:""},children:({handleSubmit:a,handleChange:n,values:t,touched:c,errors:i})=>e.jsx(s,{onSubmit:a,children:e.jsxs(h,{children:[e.jsx(h.Header,{as:"h4",children:"Submit Form"}),e.jsxs(h.Body,{children:[e.jsxs(m,{className:"mb-3",children:[e.jsxs(s.Group,{as:r,md:"5",children:[e.jsx(s.Label,{children:"Status"}),e.jsx(p,{hasValidation:!0,children:e.jsxs("select",{className:"form-select",name:"status",onChange:n,children:[e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"RFP",children:"RFP"})]})}),e.jsx(o,{name:"status",component:"div",className:"text-danger"})]}),e.jsx(s.Group,{as:r,md:t.status==="In Progress"?"1":"3"}),e.jsxs(s.Group,{as:r,md:"2",children:[e.jsx(s.Label,{children:"Requested Date"}),e.jsxs(p,{hasValidation:!0,children:[e.jsx(b,{name:"requested_date",className:"date"}),e.jsx(s.Control.Feedback,{type:"invalid",children:i.requested_date})]})]}),t.status==="RFP"?e.jsxs(s.Group,{as:r,md:2,children:[e.jsx(s.Label,{children:"Target Date"}),e.jsx(s.Control,{type:"text",name:"target_date",placeholder:"Target Date",value:t.target_date,onChange:n,isValid:!!c.target_date&&!i.target_date,isInvalid:!!i.target_date}),e.jsx(o,{name:"target_date",component:"div",className:"text-danger"})]}):t.status==="In Progress"?e.jsxs(e.Fragment,{children:[e.jsxs(s.Group,{as:r,md:"2",children:[e.jsx(s.Label,{children:"Target Date"}),e.jsxs(p,{hasValidation:!0,children:[e.jsx(b,{name:"target_date",className:"date"}),e.jsx(s.Control.Feedback,{type:"invalid",children:i.target_date})]})]}),e.jsxs(s.Group,{as:r,md:"2",children:[e.jsx(s.Label,{children:"Resolve Date"}),e.jsxs(p,{hasValidation:!0,children:[e.jsx(b,{name:"resolve_date",className:"date"}),e.jsx(s.Control.Feedback,{type:"invalid",children:i.resolve_date})]})]})]}):e.jsx(e.Fragment,{})]}),t.status==="RFP"||t.status==="In Progress"?e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"mb-5"}),e.jsxs(m,{className:"mb-3",children:[e.jsxs(s.Group,{as:r,md:4,children:[e.jsx(s.Label,{children:"Type"}),e.jsxs("select",{className:"form-select",name:"type",onChange:n,children:[e.jsx("option",{value:"",children:"Select Type"}),u==null?void 0:u.map(l=>e.jsx("option",{value:l.type_id,children:l.type_name}))]}),e.jsx(o,{name:"type",component:"div",className:"text-danger"})]}),t.status==="In Progress"?e.jsxs(s.Group,{as:r,md:"4",children:[e.jsx(s.Label,{children:"Seating Requirement"}),e.jsxs("select",{className:"form-select",name:"seat",onChange:n,children:[e.jsx("option",{value:"",children:"Select Seating Requirement"}),e.jsx("option",{value:"Dedicated",children:"Dedicated"}),e.jsx("option",{value:"Dedicated/Sharing",children:"Dedicated/Sharing"}),e.jsx("option",{value:"Lockdown",children:"Lockdown"}),e.jsx("option",{value:"Sharing",children:"Sharing"})]}),e.jsx(o,{name:"seat",component:"div",className:"text-danger"})]}):e.jsx(e.Fragment,{}),t.status==="RFP"?e.jsxs(s.Group,{as:r,md:4,children:[e.jsx(s.Label,{children:"Requestor"}),e.jsx(s.Control,{type:"text",name:"requestor",placeholder:"Requestor",value:t.requestor,onChange:n,isValid:!!c.requestor&&!i.requestor,isInvalid:!!i.requestor}),e.jsx(o,{name:"requestor",component:"div",className:"text-danger"})]}):e.jsx(e.Fragment,{}),e.jsxs(s.Group,{as:r,md:4,children:[e.jsx(s.Label,{children:"Need"}),e.jsx(s.Control,{type:"number",name:"need",placeholder:"Need",value:t.need,onChange:n,isValid:!!c.need&&!i.need,isInvalid:!!i.need}),e.jsx(o,{name:"need",component:"div",className:"text-danger"})]})]}),e.jsxs(m,{className:"mb-3",children:[e.jsxs(s.Group,{as:r,md:4,children:[e.jsx(s.Label,{children:"Site"}),e.jsxs("select",{className:"form-select",name:"site",onChange:n,children:[e.jsx("option",{value:"",children:"Select Site"}),S==null?void 0:S.map(l=>e.jsx("option",{value:l.site_id,children:l.site_name}))]}),e.jsx(o,{name:"site",component:"div",className:"text-danger"})]}),e.jsxs(s.Group,{as:r,md:4,children:[e.jsx(s.Label,{children:"Client"}),e.jsxs("select",{className:"form-select",name:"client",onChange:n,children:[e.jsx("option",{value:"",children:"Select Clients"}),_==null?void 0:_.filter(l=>l.is_active).map(l=>e.jsx("option",{value:l.client_id,children:l.client_name},l.client_id))]}),e.jsx(o,{name:"client",component:"div",className:"text-danger"})]})]}),e.jsx(m,{className:"mb-5"}),e.jsxs(m,{className:"mb-3",children:[e.jsxs(s.Group,{as:r,md:t.status==="In Progress"?"4":"6",children:[e.jsx(s.Label,{children:"Remarks"}),e.jsx(s.Control,{as:"textarea",name:"remarks",rows:"4",className:"noresize",placeholder:"Remarks",value:t.remarks,onChange:n,isValid:c.remarks&&!i.remarks})]}),t.status==="In Progress"?e.jsxs(s.Group,{as:r,md:"4",children:[e.jsx(s.Label,{children:"Solution"}),e.jsx(s.Control,{as:"textarea",rows:"4",name:"solution",className:"noresize",placeholder:"Solution",value:t.solution,onChange:n,isValid:c.solution&&!i.solution})]}):e.jsx(e.Fragment,{}),e.jsxs(s.Group,{as:r,md:t.status==="In Progress"?"4":"6",children:[e.jsx(s.Label,{children:"Email Trail"}),e.jsx(s.Control,{as:"textarea",name:"email_trail",rows:"4",className:"noresize",placeholder:"Email Trail",value:t.email_trail,onChange:n,isValid:c.email_trail&&!i.email_trail})]})]})]}):e.jsx(e.Fragment,{})]}),t.status==="RFP"||t.status==="In Progress"?e.jsx(e.Fragment,{children:e.jsx(h.Footer,{className:"text-center",children:e.jsx(R,{className:"btn-primary",size:"lg",type:"submit",children:"Submit form"})})}):e.jsx(e.Fragment,{})]})})})},M=()=>{const g=q(),x=u=>{g(V(u))};return e.jsx("div",{className:"sub-form",children:e.jsx(T,{formdata:x})})};export{M as default};
